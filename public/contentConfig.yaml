# ============================================================================
# CONTENT CONFIGURATION FILE
# ============================================================================
# This file defines the structure and display options for all content sections
# in the application. Each section can be a text section (from main_rules.yaml)
# or a table section (from data YAML files like armour.yaml, weapons.yaml, etc.)
#
# PROPERTIES:
# -----------
# id: string (required)
#   - Unique identifier for the section
#   - Must match an ID in main_rules.yaml for text sections
#   - Can be any unique string for table sections
#
# displayFormat: "text" | "table" | "card" (optional, defaults to "text")
#   - "text": Renders content from main_rules.yaml as formatted text
#   - "table": Renders data as a sortable table (user preference can override)
#   - "card": Renders data as a grid of cards (user preference can override)
#   - Note: For table sections, users can change format via preferences
#
# visible: boolean (required)
#   - Controls whether the section is displayed
#   - Set to false to hide sections temporarily
#
# sourceFile: string (optional)
#   - Required for table sections
#   - Valid values: "armour.yaml", "weapons.yaml", "traits.yaml", 
#                   "core_abilities.yaml", "class_abilities.yaml"
#   - Specifies which data file to load
#
# visibleFields: string[] (optional)
#   - List of field names to display in table/card/text views
#   - If omitted, all fields from the data are shown
#   - Fields in aggregateColumns are excluded unless explicitly listed here
#
# showInNavigation: boolean (optional, defaults to true)
#   - Controls whether the section appears in the navigation sidebar
#   - Set to false to hide from navigation but still show in content
#
# filter: object (optional)
#   - Filters the data displayed in table sections
#   - For class_abilities.yaml: { classIds: ["warrior", "scoundrel"] }
#   - For traits.yaml: { groupIds: ["ancestral", "combat"] }
#   - For other tables: { field: "fieldName", values: ["value1", "value2"] }
#
# splitBy: string (optional)
#   - Field name to group table data by
#   - Creates separate tables for each unique value
#   - Example: "classId" groups class abilities by class
#   - Example: "groupId" groups traits by trait group
#
# groupTitleField: string (optional, required if splitBy is set)
#   - Field name to use as the heading for each group
#   - Example: "className" displays the class name as heading
#   - Example: "group" displays the group name as heading
#
# metadataFields: string[] (optional)
#   - Fields to display as metadata above each grouped table
#   - Only used when splitBy is set
#   - Example: ["type", "attributes", "summary"] shows class metadata
#   - Example: ["description"] shows trait group description
#
# aggregateColumns: array (optional)
#   - Combines multiple fields into a single custom column
#   - Fields in aggregate columns are excluded from regular columns by default
#   - Fields can appear in both if explicitly listed in visibleFields
#   - Empty/missing fields are automatically skipped
#   - Column order: Include the aggregate column name in visibleFields to control position
#     If the aggregate column name is not in visibleFields, it will be appended at the end
#   - Structure:
#     aggregateColumns:
#       - name: "Column Name"           # Custom column name (use this in visibleFields to control order)
#         fields:
#           - field: "fieldName"         # Field from data
#             label: "Label"            # Optional label (omit for no label)
#             labelFormat: ["bold"]     # Optional: ["bold"], ["italic"], or ["bold", "italic"]
#             valueFormat: ["italic"]    # Optional: ["bold"], ["italic"], or ["bold", "italic"]
#
# children: array (optional)
#   - Nested sections for hierarchical organization
#   - Creates sub-sections with indented headings
#
# EXAMPLES:
# --------
# See examples below for each feature type
# ============================================================================

sections:
  # ============================================================================
  # TEXT SECTION EXAMPLES
  # ============================================================================
  # Text sections display content from main_rules.yaml
  # The "id" must match a section ID in main_rules.yaml
  
  # Simple text section - displays a single section from main_rules.yaml
  - id: "introduction"
    displayFormat: "text"
    visible: true

  # Text section with nested children - creates a hierarchical structure
  # Children are displayed as sub-sections with indented headings
  - id: "resolution-mechanics"
    displayFormat: "text"
    visible: true
    children:
      - id: "dice-system"
        displayFormat: "text"
        visible: true
        children:
          - id: "challenge-roll"
            displayFormat: "text"
            visible: true
          - id: "attack-roll"
            displayFormat: "text"
            visible: true
          - id: "resistance-roll"
            displayFormat: "text"
            visible: true
      - id: "advantage-disadvantage"
        displayFormat: "text"
        visible: true
      - id: "push-for-success"
        displayFormat: "text"
        visible: true
        children:
          - id: "minor-setback-examples"
            displayFormat: "text"
            visible: true
          - id: "major-setback-examples"
            displayFormat: "text"
            visible: true

  - id: "creating-a-character"
    displayFormat: "text"
    visible: true
    children:
      - id: "attributes"
        displayFormat: "text"
        visible: true
        children:
          - id: "strength"
            displayFormat: "text"
            visible: true
          - id: "constitution"
            displayFormat: "text"
            visible: true
          - id: "dexterity"
            displayFormat: "text"
            visible: true
          - id: "perception"
            displayFormat: "text"
            visible: true
          - id: "intelligence"
            displayFormat: "text"
            visible: true
          - id: "spirit"
            displayFormat: "text"
            visible: true
      - id: "energy"
        displayFormat: "text"
        visible: true
        children:
          - id: "spending-energy"
            displayFormat: "text"
            visible: true
          - id: "hp-energy"
            displayFormat: "text"
            visible: true
          - id: "resist-energy"
            displayFormat: "text"
            visible: true
      - id: "hit-points"
        displayFormat: "text"
        visible: true
      - id: "skills"
        displayFormat: "text"
        visible: true
        children:
          - id: "skill-ideas"
            displayFormat: "text"
            visible: true
      - id: "traits"
        displayFormat: "text"
        visible: true

  - id: "equipment"
    displayFormat: "text"
    visible: true
    children:
      - id: "weapons"
        displayFormat: "text"
        visible: true
      - id: "armour"
        displayFormat: "text"
        visible: true
      - id: "shields"
        displayFormat: "text"
        visible: true

  # ============================================================================
  # TABLE SECTION EXAMPLES
  # ============================================================================
  # Table sections display data from YAML files (armour.yaml, weapons.yaml, etc.)
  # They can be displayed as tables, cards, or text format (user preference)
  # Table sections can be mixed with text sections in any order
  
  # Basic table example - displays all specified fields
  - id: "weapons-table"
    sourceFile: "weapons.yaml"
    displayFormat: "table"
    visibleFields: ["weapon", "notes", "modifier", "range"]
    visible: true
    showInNavigation: true
    # Optional: Filter to show only specific weapons
    # filter: { field: "weapon", values: ["Sword", "Bow"] }

  # Another basic table example
  - id: "armour-table"
    sourceFile: "armour.yaml"
    displayFormat: "table"
    visibleFields: ["type", "armour", "movement", "notes"]
    visible: true
    showInNavigation: true
    # Optional: Filter to show only specific armour types
    # filter: { field: "type", values: ["Light", "Medium"] }

  # Grouped table example - splits data into separate tables by group
  # Each group gets its own heading and optional metadata
  - id: "traits-table"
    sourceFile: "traits.yaml"
    displayFormat: "table"
    visibleFields: ["name", "desc", "type", "usage", "useLimit", "requirements"]
    visible: true
    showInNavigation: true
    splitBy: "groupId"              # Groups traits by their group ID
    groupTitleField: "group"         # Uses "group" field as the heading for each group
    metadataFields: ["description"]  # Shows group description above each group's table
    # Optional: Filter to show only specific trait groups
    # filter: { groupIds: ["ancestral", "combat"] }

  - id: "combat"
    displayFormat: "text"
    visible: true
    children:
      - id: "combat-basics"
        displayFormat: "text"
        visible: true
      - id: "initiative"
        displayFormat: "text"
        visible: true
      - id: "action-points"
        displayFormat: "text"
        visible: true
      - id: "reactions"
        displayFormat: "text"
        visible: true
      - id: "energy-combat"
        displayFormat: "text"
        visible: true
      - id: "attacks"
        displayFormat: "text"
        visible: true
      - id: "resistance-vulnerability"
        displayFormat: "text"
        visible: true
      - id: "healing"
        displayFormat: "text"
        visible: true
      - id: "condition-mechanics"
        displayFormat: "text"
        visible: true
      - id: "abilities"
        displayFormat: "text"
        visible: true
      - id: "unconscious-death"
        displayFormat: "text"
        visible: true

  - id: "core-abilities"
    displayFormat: "text"
    visible: true
    children:
      - id: "move"
        displayFormat: "text"
        visible: true
      - id: "disengage"
        displayFormat: "text"
        visible: true
      - id: "shift"
        displayFormat: "text"
        visible: true
      - id: "regular-attack"
        displayFormat: "text"
        visible: true
      - id: "hold-regular-attack"
        displayFormat: "text"
        visible: true
      - id: "attack-of-opportunity"
        displayFormat: "text"
        visible: true
      - id: "inspect-creature"
        displayFormat: "text"
        visible: true
      - id: "hide"
        displayFormat: "text"
        visible: true
      - id: "help"
        displayFormat: "text"
        visible: true
      - id: "push-pull"
        displayFormat: "text"
        visible: true
      - id: "stand-up"
        displayFormat: "text"
        visible: true
      - id: "draw-weapon"
        displayFormat: "text"
        visible: true
      - id: "swap-weapon"
        displayFormat: "text"
        visible: true
      - id: "drop-item"
        displayFormat: "text"
        visible: true
      - id: "pick-up-item"
        displayFormat: "text"
        visible: true
      - id: "drink-potion"
        displayFormat: "text"
        visible: true
      - id: "talk-to-allies"
        displayFormat: "text"
        visible: true
      - id: "improvise"
        displayFormat: "text"
        visible: true
      - id: "other"
        displayFormat: "text"
        visible: true

  # Simple table without grouping
  # Note: showInNavigation controls whether this appears in the sidebar navigation
  - id: "core-abilities-table"
    sourceFile: "core_abilities.yaml"
    displayFormat: "table"
    visibleFields: ["name", "description", "target", "apCost"]
    visible: true
    showInNavigation: true  # Set to false to hide from navigation but still show in content
    # Optional: Filter to show only specific abilities
    # filter: { field: "name", values: ["Move", "Attack"] }

  - id: "conditions"
    displayFormat: "text"
    visible: true
    children:
      - id: "blind"
        displayFormat: "text"
        visible: true
      - id: "deaf"
        displayFormat: "text"
        visible: true
      - id: "marked"
        displayFormat: "text"
        visible: true
      - id: "charmed"
        displayFormat: "text"
        visible: true
      - id: "dominated"
        displayFormat: "text"
        visible: true
      - id: "taunted"
        displayFormat: "text"
        visible: true
      - id: "frightened"
        displayFormat: "text"
        visible: true
      - id: "prone"
        displayFormat: "text"
        visible: true
      - id: "hobbled"
        displayFormat: "text"
        visible: true
      - id: "immobilised"
        displayFormat: "text"
        visible: true
      - id: "dazed"
        displayFormat: "text"
        visible: true
      - id: "stunned"
        displayFormat: "text"
        visible: true
      - id: "silenced"
        displayFormat: "text"
        visible: true
      - id: "restrained"
        displayFormat: "text"
        visible: true
      - id: "incapacitated"
        displayFormat: "text"
        visible: true
      - id: "paralysed"
        displayFormat: "text"
        visible: true
      - id: "poisoned"
        displayFormat: "text"
        visible: true
      - id: "bleeding"
        displayFormat: "text"
        visible: true
      - id: "feeble"
        displayFormat: "text"
        visible: true
      - id: "vulnerability"
        displayFormat: "text"
        visible: true
      - id: "unconscious"
        displayFormat: "text"
        visible: true
      - id: "dying"
        displayFormat: "text"
        visible: true

  - id: "classes"
    displayFormat: "text"
    visible: true

  # ============================================================================
  # AGGREGATE COLUMNS EXAMPLE
  # ============================================================================
  # This example shows how to use aggregateColumns to combine multiple fields
  # into a single "Description" column. Fields like "otherCost", "flavourText",
  # "extraEffectCost", "extraEffectDescription", and "description" are combined
  # into one column with custom labels and formatting.
  #
  # Key features demonstrated:
  # - Multiple fields combined into one column
  # - Custom column name ("Description")
  # - Optional labels for each field
  # - Formatting options (bold, italic) for labels and values
  # - Empty fields are automatically skipped
  # - Fields in aggregate columns are excluded from regular columns
  # - Fields can appear in both if explicitly listed in visibleFields
  # - Column order: Include aggregate column name in visibleFields to control position
  #   (if not included, aggregate columns appear at the end)
  # ============================================================================
  - id: "class-abilities-table"
    sourceFile: "class_abilities.yaml"
    displayFormat: "table"
    # Note: Fields in aggregateColumns are automatically excluded unless listed here
    # To control aggregate column position, include its name in visibleFields at desired position
    # Example: ["level", "Description", "name", "apCost"] puts Description between level and name
    # If aggregate column name is not in visibleFields, it will be appended at the end
    visibleFields: ["level", "name", "Description", "apCost", "target", "range", "type"]
    visible: true
    showInNavigation: true
    splitBy: "classId"
    groupTitleField: "className"
    metadataFields: ["type", "attributes", "summary"]
    
    # Aggregate columns combine multiple fields into custom columns
    aggregateColumns:
      - name: "Description"
        fields:
          # Field with italic label
          - field: "flavourText"
            valueFormat: ["italic"]
          # Field with label and formatting
          - field: "otherCost"
            label: "Additional Cost"
            labelFormat: ["bold"]
            valueFormat: []
          # Field without label (just displays the value)
          - field: "description"
            # No label means just the value is shown
            valueFormat: []
          # Field with bold and italic formatting
          - field: "extraEffectCost"
            label: "Extra Effect Cost"
            labelFormat: ["bold"]
            valueFormat: []
          # Field with label
          - field: "extraEffectDescription"
            label: "Extra Effect"
            labelFormat: []
            valueFormat: []
            
    
    children:
      - id: "deadly-escalation"
        displayFormat: "text"
        visible: true
    # Optional: Filter to show only specific classes
    # filter: { classIds: ["warrior", "scoundrel", "marksman"] }
  
  # ============================================================================
  # MORE AGGREGATE COLUMN EXAMPLES (commented out - uncomment to use)
  # ============================================================================
  
  # Example 1: Simple aggregate column with no labels
  # - id: "example-table-1"
  #   sourceFile: "weapons.yaml"
  #   displayFormat: "table"
  #   visibleFields: ["weapon", "modifier"]
  #   visible: true
  #   aggregateColumns:
  #     - name: "Details"
  #       fields:
  #         - field: "notes"
  #           # No label - just shows the value
  #         - field: "range"
  #           # No label - just shows the value
  
  # Example 2: Aggregate column with labels and formatting
  # - id: "example-table-2"
  #   sourceFile: "core_abilities.yaml"
  #   displayFormat: "table"
  #   visibleFields: ["name", "apCost"]
  #   visible: true
  #   aggregateColumns:
  #     - name: "Ability Details"
  #       fields:
  #         - field: "description"
  #           label: "Description"
  #           labelFormat: ["bold"]
  #         - field: "target"
  #           label: "Target"
  #           labelFormat: ["bold"]
  #           valueFormat: ["italic"]
  
  # Example 3: Multiple aggregate columns
  # - id: "example-table-3"
  #   sourceFile: "class_abilities.yaml"
  #   displayFormat: "table"
  #   visibleFields: ["level", "name"]
  #   visible: true
  #   aggregateColumns:
  #     - name: "Costs"
  #       fields:
  #         - field: "apCost"
  #           label: "AP"
  #           labelFormat: ["bold"]
  #         - field: "otherCost"
  #           label: "Other"
  #           labelFormat: ["bold"]
  #     - name: "Effects"
  #       fields:
  #         - field: "description"
  #         - field: "extraEffectDescription"
  #           label: "Extra"
  #           labelFormat: ["italic"]
  
  # Example 4: Field appearing in both aggregate and regular column
  # - id: "example-table-4"
  #   sourceFile: "class_abilities.yaml"
  #   displayFormat: "table"
  #   # Include "description" here to show it in both places
  #   visibleFields: ["level", "name", "description", "apCost"]
  #   visible: true
  #   aggregateColumns:
  #     - name: "Full Description"
  #       fields:
  #         - field: "description"
  #           label: "Main"
  #         - field: "flavourText"
  #           label: "Flavour"
  #           labelFormat: ["italic"]
  
  # Example 5: Controlling aggregate column position
  # - id: "example-table-5"
  #   sourceFile: "class_abilities.yaml"
  #   displayFormat: "table"
  #   # Include "Description" in visibleFields to control where it appears
  #   # This puts Description between "name" and "apCost"
  #   visibleFields: ["level", "name", "Description", "apCost", "target"]
  #   visible: true
  #   aggregateColumns:
  #     - name: "Description"  # Must match the name in visibleFields
  #       fields:
  #         - field: "description"
  #         - field: "flavourText"
  #           label: "Flavour"
  #           labelFormat: ["italic"]

